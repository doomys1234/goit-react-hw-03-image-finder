{"version":3,"sources":["components/ImageGalleryItem /ImageGalleryItem.module.scss","components/Modal/Modal.module.scss","components/ImageGallery/ImageGallery.module.scss","components/Button/Button.module.scss","components/Searchbar/Searchbar.js","components/ImageGalleryItem /ImageGalleryItem .js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","App.js","index.js","components/Searchbar/Searchbar.module.scss"],"names":["module","exports","Searchbar","state","value","images","handleChange","e","normalisedValue","currentTarget","toLowerCase","setState","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","s","searchbar","search_form","this","type","search_button","search_button_label","search_input","autoComplete","autoFocus","placeholder","onChange","React","Component","ImageGalleryItem","id","webformatURL","largeImageURL","onClick","image_gallery_item","gallery_item_image","src","alt","ImageGallery","onImageClick","image_gallery","map","image","index","Button","loadMore","button","Modal","handleKeyDown","code","toggleModal","onBackdropClose","target","nodeName","window","addEventListener","removeEventListener","overlay","modal","modalImage","App","status","page","openModal","fetchImages","nextValue","nextPage","KEY","amountOfItems","fetch","then","response","ok","json","arrImages","hits","forEach","img","push","prevState","prevPage","scrollTo","top","document","documentElement","scrollHeight","behavior","catch","loading","console","log","prevProps","preValue","largeImageUrl","color","height","width","timeout","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c010d39a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"image_gallery_item\":\"ImageGalleryItem_image_gallery_item__3JLKC\",\"gallery_item_image\":\"ImageGalleryItem_gallery_item_image__2cD7S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1TgzI\",\"modal\":\"Modal_modal__1vwov\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image_gallery\":\"ImageGallery_image_gallery__3LZ_b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2Lf63\"};","import React from \"react\";\nimport s from \"./Searchbar.module.scss\";\nimport { toast } from \"react-toastify\";\nimport PropTypes from \"prop-types\";\nclass Searchbar extends React.Component {\n  state = {\n    value: \"\",\n    images: [],\n  };\n\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  handleChange = (e) => {\n    const normalisedValue = e.currentTarget.value.toLowerCase();\n    this.setState({\n      value: normalisedValue,\n      images: [],\n    });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    if (this.state.value.trim() === \"\") {\n      toast.error(\"Введите название картинки\");\n      return;\n    }\n    this.props.onSubmit(this.state);\n    this.setState({\n      value: \"\",\n    });\n  };\n\n  render() {\n    return (\n      <>\n        <header className={s.searchbar}>\n          <form className={s.search_form} onSubmit={this.handleSubmit}>\n            <button type=\"submit\" className={s.search_button}>\n              <span className={s.search_button_label}>Search</span>\n            </button>\n\n            <input\n              className={s.search_input}\n              type=\"text\"\n              autoComplete=\"off\"\n              autoFocus\n              placeholder=\"Search images and photos\"\n              onChange={this.handleChange}\n              value={this.state.value}\n            />\n          </form>\n        </header>\n      </>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from \"react\";\nimport s from \"./ImageGalleryItem.module.scss\";\nexport default function ImageGalleryItem({\n  id,\n  webformatURL,\n  largeImageURL,\n  onClick,\n}) {\n  return (\n    <li className={s.image_gallery_item} onClick={() => onClick(largeImageURL)}>\n      <img className={s.gallery_item_image} src={webformatURL} alt=\"#\" />\n    </li>\n  );\n}\n","import React from \"react\";\nimport ImageGalleryItem from \"../ImageGalleryItem /ImageGalleryItem \";\nimport s from \"./ImageGallery.module.scss\";\nimport PropTypes from \"prop-types\";\nexport default function ImageGallery({ images, onImageClick }) {\n  return (\n    <ul className={s.image_gallery}>\n      {images.map((image, index) => (\n        <ImageGalleryItem\n          key={index}\n          webformatURL={image.webformatURL}\n          largeImageURL={image.largeImageURL}\n          onClick={() => {\n            onImageClick(image.largeImageURL);\n          }}\n        />\n      ))}\n    </ul>\n  );\n}\n\nImageGallery.propTypes = {\n  images: PropTypes.array,\n  onImageClick: PropTypes.func,\n};\n","import React from \"react\";\nimport s from \"./Button.module.scss\";\nimport PropTypes from \"prop-types\";\nexport default function Button({ loadMore }) {\n  return (\n    <>\n      <button className={s.button} type=\"button\" onClick={loadMore}>\n        Load More\n      </button>\n    </>\n  );\n}\n\nButton.propTypes = {\n  loadMore: PropTypes.func,\n};\n","import React from \"react\";\nimport s from \"./Modal.module.scss\";\nimport PropTypes from \"prop-types\";\nclass Modal extends React.Component {\n  static propTypes = {\n    modalImage: PropTypes.string,\n    toggleModal: PropTypes.func,\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.toggleModal();\n    }\n  };\n\n  onBackdropClose = (e) => {\n    if (e.target.nodeName === \"IMG\") {\n      return;\n    }\n    this.props.toggleModal();\n  };\n\n  render() {\n    return (\n      <div className={s.overlay} onClick={this.onBackdropClose}>\n        <div className={s.modal}>\n          <img src={this.props.modalImage} alt=\"#\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n","/* eslint-disable array-callback-return */\nimport React from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Searchbar from \"./components/Searchbar/Searchbar.js\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery.js\";\nimport Button from \"./components/Button/Button.js\";\nimport Modal from \"./components/Modal/Modal.js\";\n\nclass App extends React.Component {\n  state = {\n    value: \"\",\n    images: [],\n    status: \"idle\",\n    page: 1,\n    modalImage: \"\",\n    openModal: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const preValue = prevState.value;\n    const nextValue = this.state.value;\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n    const KEY = \"24630234-63d298eb892b3c6f0ac62f70f\";\n\n    if (preValue !== nextValue) {\n      console.log(this.state.page);\n\n      this.setState({ page: 1 });\n      this.fetchImages(nextValue, nextPage, KEY, 12);\n    }\n\n    if (prevPage !== nextPage) {\n      if (nextPage === 1) {\n        return;\n      }\n      this.fetchImages(nextValue, nextPage, KEY, 12);\n    }\n  }\n\n  fetchImages = (nextValue, nextPage, KEY, amountOfItems) => {\n    this.setState({ status: \"pending\" });\n\n    fetch(\n      `https://pixabay.com/api/?q=${nextValue}&page=${nextPage}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=${amountOfItems}`\n    )\n      .then((response) => {\n        if (response.ok) {\n          return response.json();\n        }\n      })\n      .then((image) => {\n        const arrImages = [];\n        image.hits.forEach((img) => {\n          arrImages.push({\n            id: img.id,\n            webformatURL: img.webformatURL,\n            largeImageURL: img.largeImageURL,\n          });\n        });\n\n        // if (this.preValue !== nextValue) {\n        this.setState((prevState) => ({\n          images:\n            this.state.page > 1\n              ? [...prevState.images, ...arrImages]\n              : arrImages,\n          status: \"resolved\",\n        }));\n        // }\n        if (this.prevPage !== nextPage) {\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: \"smooth\",\n          });\n        }\n      })\n      .catch((error) => this.setState({ status: \"rejected\" }));\n  };\n\n  onSubmit = ({ value, images, loading }) => {\n    if (this.state.value === value) {\n      toast.error(\"You are looking at it now\");\n      return;\n    }\n\n    if (this.state.value !== value) {\n      this.setState({ value, images, loading, page: 1 });\n    }\n  };\n\n  loadMore = () => {\n    this.setState((prevState) => ({\n      page: prevState.page + 1,\n    }));\n    console.log(this.state.page);\n  };\n\n  toggleModal = (e) => {\n    this.setState(({ openModal }) => ({\n      openModal: !openModal,\n    }));\n  };\n\n  onImageClick = (largeImageURL) => {\n    this.setState({\n      modalImage: largeImageURL,\n      openModal: true,\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <Searchbar onSubmit={this.onSubmit} />\n\n        {this.state.status === \"resolved\" && (\n          <ImageGallery\n            images={this.state.images}\n            onImageClick={(largeImageUrl) => this.onImageClick(largeImageUrl)}\n          />\n        )}\n        {this.state.status === \"pending\" && (\n          <Loader\n            type=\"TailSpin\"\n            color=\"#00BFFF\"\n            height={80}\n            width={80}\n            timeout={3000}\n          />\n        )}\n        {this.state.status === \"resolved\" && (\n          <Button loadMore={this.loadMore} />\n        )}\n        {this.state.openModal && (\n          <Modal\n            modalImage={this.state.modalImage}\n            toggleModal={this.toggleModal}\n          />\n        )}\n\n        <ToastContainer\n          position={\"top-right\"}\n          autoClose={5000}\n          hideProgressBar={false}\n          newestOnTop={false}\n          closeOnClick\n          rtl={false}\n          pauseOnFocusLoss\n          draggable\n          pauseOnHover\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__1psVe\",\"search_form\":\"Searchbar_search_form__3D9HV\",\"search_button\":\"Searchbar_search_button__3NW9k\",\"search_button_label\":\"Searchbar_search_button_label__GWb5b\",\"search_input\":\"Searchbar_search_input__3FvjI\"};"],"sourceRoot":""}